# =============================================================================
# SabaiFace Service Configuration
# =============================================================================

# Service
NODE_ENV=development
PORT=8086

# =============================================================================
# Database
# =============================================================================

# PostgreSQL with pgvector extension for face descriptor storage
DATABASE_URL=postgresql://user:password@localhost:5432/sabaiface

# =============================================================================
# Face Detection
# =============================================================================

# Path to face-api.js models (auto-downloaded on install)
MODELS_PATH=./models

# R2 public URL for model downloads
R2_MODELS_URL=https://pub-9b5b2bc0a9bc4b03bbbd97fdd1168fed.r2.dev

# Skip model download on install (for CI/CD, Docker builds, non-ML devs)
# SKIP_MODEL_DOWNLOAD=1

# Enable age/gender detection (true/false)
DETECT_ATTRIBUTES=true

# =============================================================================
# ML Tuning Parameters (Tuned for Low False Positives)
# =============================================================================
# These defaults are tuned via eval. See log/013-recognition-grid-search-results.md

# Search: Minimum similarity threshold (0-1 scale)
# Higher = stricter matching, fewer false positives, lower recall
# 0.97 = Low FP (Avg FP@10=0.30, Recall@20=49.79%)
# 0.94 = High Recall (Avg FP@10=4.30, Recall@20=93.66%)
SEARCH_MIN_SIMILARITY=0.97

# Index: Quality filter for indexing faces
# 'none' = Index all detected faces
# 'auto' = Filter out small/low-quality faces (uses FACE_MIN_AREA_RATIO_AUTO)
INDEX_QUALITY_FILTER=none

# Index: Minimum detection confidence (0-1)
INDEX_MIN_CONFIDENCE=0.5

# Index: Minimum face area ratio when INDEX_QUALITY_FILTER=auto
# 0.0025 = 0.25% of image area (e.g., 50x50 in 2000x2000 image)
FACE_MIN_AREA_RATIO_AUTO=0.0025

# =============================================================================
# Evaluation / Testing
# =============================================================================

# Path to Kaggle face recognition dataset (for eval scripts)
# Download from: https://www.kaggle.com/datasets/hereisburak/pins-face-recognition
SABAIFACE_DATASET_PATH=../../../dataset

# AWS credentials (for eval comparison with AWS Rekognition)
AWS_REGION=ap-southeast-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
