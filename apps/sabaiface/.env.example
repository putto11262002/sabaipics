# =============================================================================
# SabaiFace Service Configuration
# =============================================================================

# Service configuration
NODE_ENV=development
PORT=8086
LOG_LEVEL=info

# Face provider: 'sabaiface' (self-hosted) or 'aws' (AWS Rekognition)
FACE_PROVIDER=sabaiface

# =============================================================================
# Face Detection Settings
# =============================================================================

# Path to face-api.js models directory
MODELS_PATH=./models

# R2 public URL for model downloads (auto-downloaded on install)
R2_MODELS_URL=https://pub-9b5b2bc0a9bc4b03bbbd97fdd1168fed.r2.dev

# Face detection settings
FACE_DETECTOR=ssd # ssd (SSD MobileNetV1) or tiny (Tiny Face Detector)
FACE_CONFIDENCE_THRESHOLD=0.3 # Minimum confidence for face detection (0-1)
MAX_FACES_PER_IMAGE=100 # Maximum faces to detect per image
DETECT_ATTRIBUTES=true # Detect age, gender (true/false)

# =============================================================================
# Vector Search Settings
# =============================================================================

# Path to Kaggle face recognition dataset (for testing/evaluation)
# This is used by the eval:generate-ground-truth script
SABAIFACE_DATASET_PATH=../../../dataset

# Default similarity threshold for face matching (0-1 scale)
DEFAULT_SIMILARITY_THRESHOLD=0.8

# Maximum results to return in similarity search
DEFAULT_MAX_RESULTS=10

# =============================================================================
# Database Configuration
# =============================================================================

# INTERNAL database for SabaiFace service (separate from main app)
# This stores face descriptors and vectors for similarity search
SABAIFACE_DATABASE_URL=postgresql://neondb_owner:npg_T3k2NvZYWiPL@ep-ancient-violet-a1jsotbd-pooler.ap-southeast-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require

# Connection pool settings
DB_POOL_MIN=2
DB_POOL_MAX=10

# =============================================================================
# Performance Tuning
# =============================================================================

# Number of concurrent face detection requests
CONCURRENT_REQUESTS=10

# Request timeout in milliseconds
REQUEST_TIMEOUT_MS=30000

# Enable GPU acceleration (requires @tensorflow/tfjs-node-gpu)
USE_GPU=false

# =============================================================================
# Logging and Observability
# =============================================================================

# Enable performance metrics logging
ENABLE_METRICS=true

# Log all face detection results (useful for debugging)
LOG_DETECTIONS=false

# =============================================================================
# AWS Configuration (only if FACE_PROVIDER=aws)
# =============================================================================

# AWS Region
AWS_REGION=us-west-2

# AWS Credentials
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
